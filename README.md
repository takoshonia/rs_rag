# RAG_RS

ეს პროექტი მცირე RAG-აპლიკაციაა, რომელიც პასუხობს კითხვებს საგადასახადო და საბაჟო თემატიკაზე ქართულად. იგი იყენებს მხოლოდ იმ დოკუმენტებს, რომლებსაც `data/` საქაღალდეშია, და ყოველ პასუხში ბოლოში ამატებს წყაროს ციტატას საინფორმაციო და მეთოდოლოგიურ ჰაბზე (infohub.rs.ge)


**როგორ გავაკეთე**

ინფოჰაბზე (infohub.rs.ge) საჯარო API არ არის, ამიტომ ვიყენებ მხოლოდ ლოკალურ ინდექსს: დოკუმენტებს ვაგროვებ `data/`-ში (ჩამოტვირთვა ან კოპირება), შემდეგ `python -m rag_agent.ingest` ფრაგმენტებად ჭრის ტექსტს (წინადადება/პარაგრაფი, გადაფარვით), ინახავს `index/chunks.json`-ში და, თუ sentence-transformers დაინსტალირებულია, ვექტორებს `index/embeddings.npy`-ში. ძიება ჰიბრიდულია: BM25 (საკვანძო სიტყვა) + ვექტორული მსგავსება (embeddings). ტოპ კ ჩანკი გადაეცემა Gemini-ის (OpenAI-თან შესათავსებელი API), პრომპტში ჩაწერილია — პასუხი მხოლოდ მოწოდებული კონტექსტიდან, ქართულად, ბოლოში ციტატა. ციტატის ტექსტი და ბმული `config.yaml`-შია, რომ ცვლილება მარტივი იყოს.


**საჭიროა:** Python 3.10 ან უფრო ახალი, Gemini API- ის key.

**დაყენება**

1. პროექტის საქაღალდიდან ტერმინალში:

   ```
   python -m venv .venv
   .venv\Scripts\Activate.ps1
   pip install -r requirements.txt
   ```

2. პროექტის ფესვში შექმენით `.env` ფაილი (შეგიძლიათ დააკოპიროთ `.env.example`). მიუთითეთ:

   - `GEMINI_API_KEY` — გასაღები https://aistudio.google.com/apikey-დან  
   - `GEMINI_BASE_URL` — Gemini-სთვის დატოვეთ ისე, როგორც `.env.example`-შია

3. დოკუმენტები ჩადეთ `data/`-ში (`.txt` ან `.pdf`). სურვილისამებრ: გამოიყენეთ ქვესაქაღალდეები (მაგ. `data/legislative/`), რათა საქაღალდის სახელი გახდეს დოკუმენტის ტიპი ფილტრაციისთვის.

4. ინდექსის აგება:

   ```
   python -m rag_agent.ingest
   ```

5. კითხვის დასმა:

   ```
   python main.py "როგორ ხდება საბაჟო გადასახადის გადახდა?"
   ```

პასუხი ქართულად იქნება და ბოლოში იქნება ფიქსირებული ციტატა და ბმული https://infohub.rs.ge/ka.

**კონფიგურაცია**

- `config.yaml` — მოდელის სახელი (მაგ. `gemini-2.5-flash`), ჩანკის ზომა, retrieval-ის პარამეტრები და ციტატის ტექსტი.
- `.env` — მხოლოდ `GEMINI_API_KEY` და `GEMINI_BASE_URL`.

**კოდიდან გამოყენება**

```python
from rag_agent import ask

answer, sources = ask("შენი კითხვა ქართულად")
print(answer)
```

სურვილისამებრ: `ask("კითხვა", doc_type="legislative")` — მხოლოდ იმ ჩანკების მიღება, რომლებიც ამ დოკუმენტის ტიპის საქაღალდიდანაა (`data/`-ის ქვეშ).

**რა არის რეპოში**

- `rag_agent/` — retrieval (BM25 + embeddings), გენერაცია (Gemini, OpenAI-თან შესათავსებელი API-ით), ingest, კონფიგის ჩატვირთვა.
- `main.py` — CLI შესასვლელი.
- `data/` — წყაროს დოკუმენტები(manually ჩამატებული).
- `index/` — ingest-ის შედეგი (`chunks.json`, `embeddings.npy`). `data/`-ში ფაილების დამატების ან შეცვლის შემდეგ თავიდან გაშვება: `python -m rag_agent.ingest`.


